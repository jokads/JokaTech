{"version":3,"file":"page-BvVAsZdL.js","sources":["../../src/pages/carrinho/page.tsx"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport Navbar from '../../components/feature/Navbar';\nimport Footer from '../../components/feature/Footer';\nimport { Product } from '../../lib/supabase';\n\ninterface CartItem extends Product {\n  quantity: number;\n}\n\nexport default function Carrinho() {\n  const navigate = useNavigate();\n  const [cartItems, setCartItems] = useState<CartItem[]>([]);\n\n  useEffect(() => {\n    loadCart();\n  }, []);\n\n  const loadCart = () => {\n    try {\n      if (typeof window !== 'undefined' && window.localStorage) {\n        const cartData = localStorage.getItem('cart');\n        if (cartData) {\n          const cart = JSON.parse(cartData);\n          if (Array.isArray(cart)) {\n            setCartItems(cart);\n          }\n        }\n      }\n    } catch (error) {\n      console.error('Error loading cart from localStorage:', error);\n      setCartItems([]);\n    }\n  };\n\n  const updateQuantity = (id: string, newQuantity: number) => {\n    try {\n      const updatedCart = cartItems.map((item) =>\n        item.id === id ? { ...item, quantity: Math.max(1, Math.min(item.stock || 999, newQuantity)) } : item\n      );\n      setCartItems(updatedCart);\n      if (typeof window !== 'undefined' && window.localStorage) {\n        localStorage.setItem('cart', JSON.stringify(updatedCart));\n      }\n    } catch (error) {\n      console.error('Error updating cart quantity:', error);\n    }\n  };\n\n  const removeItem = (id: string) => {\n    try {\n      const updatedCart = cartItems.filter((item) => item.id !== id);\n      setCartItems(updatedCart);\n      if (typeof window !== 'undefined' && window.localStorage) {\n        localStorage.setItem('cart', JSON.stringify(updatedCart));\n      }\n    } catch (error) {\n      console.error('Error removing item from cart:', error);\n    }\n  };\n\n  const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n  const shipping = subtotal > 100 ? 0 : 9.99;\n  const total = subtotal + shipping;\n\n  const handleCheckout = () => {\n    try {\n      navigate('/checkout');\n    } catch (error) {\n      console.error('Error navigating to checkout:', error);\n      window.location.href = '/checkout';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <Navbar />\n\n      <div className=\"pt-24 pb-20\">\n        <div className=\"max-w-7xl mx-auto px-6\">\n          <h1 className=\"text-5xl font-bold text-black mb-8\">\n            CARRINHO DE <span className=\"text-gold\">COMPRAS</span>\n          </h1>\n\n          {cartItems.length === 0 ? (\n            <div className=\"text-center py-20\">\n              <i className=\"ri-shopping-cart-line text-6xl text-gray-300 mb-4\"></i>\n              <p className=\"text-gray-600 text-lg mb-6\">Seu carrinho está vazio</p>\n              <Link\n                to=\"/produtos\"\n                className=\"inline-block px-8 py-3 bg-gold text-black font-semibold rounded-lg hover:bg-gold-dark transition-colors cursor-pointer whitespace-nowrap\"\n              >\n                CONTINUAR COMPRANDO\n              </Link>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n              {/* Cart Items */}\n              <div className=\"lg:col-span-2 space-y-4\">\n                {cartItems.map((item) => (\n                  <div key={item.id} className=\"bg-gray-50 rounded-lg p-6 flex items-center space-x-6\">\n                    <div className=\"w-24 h-24 bg-white rounded-lg overflow-hidden flex-shrink-0\">\n                      <img\n                        src={item.image_url}\n                        alt={item.name}\n                        className=\"w-full h-full object-contain p-2\"\n                        onError={(e) => {\n                          const target = e.target as HTMLImageElement;\n                          target.src = '/placeholder-image.jpg';\n                        }}\n                      />\n                    </div>\n\n                    <div className=\"flex-1\">\n                      <Link\n                        to={`/produto/${item.id}`}\n                        className=\"text-lg font-semibold text-black hover:text-gold cursor-pointer\"\n                      >\n                        {item.name}\n                      </Link>\n                      <p className=\"text-sm text-gray-600 mt-1\">{item.brand}</p>\n                      <p className=\"text-xl font-bold text-black mt-2\">€{item.price.toFixed(2)}</p>\n                    </div>\n\n                    <div className=\"flex items-center space-x-3\">\n                      <button\n                        onClick={() => updateQuantity(item.id, item.quantity - 1)}\n                        className=\"w-8 h-8 flex items-center justify-center bg-white rounded hover:bg-gray-100 cursor-pointer\"\n                        disabled={item.quantity <= 1}\n                      >\n                        <i className=\"ri-subtract-line\"></i>\n                      </button>\n                      <span className=\"text-lg font-semibold text-black w-8 text-center\">\n                        {item.quantity}\n                      </span>\n                      <button\n                        onClick={() => updateQuantity(item.id, item.quantity + 1)}\n                        className=\"w-8 h-8 flex items-center justify-center bg-white rounded hover:bg-gray-100 cursor-pointer\"\n                        disabled={item.stock !== undefined && item.quantity >= item.stock}\n                      >\n                        <i className=\"ri-add-line\"></i>\n                      </button>\n                    </div>\n\n                    <div className=\"text-right\">\n                      <p className=\"text-xl font-bold text-black mb-2\">\n                        €{(item.price * item.quantity).toFixed(2)}\n                      </p>\n                      <button\n                        onClick={() => removeItem(item.id)}\n                        className=\"text-red-600 hover:text-red-700 cursor-pointer\"\n                      >\n                        <i className=\"ri-delete-bin-line text-xl\"></i>\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Summary */}\n              <div className=\"lg:col-span-1\">\n                <div className=\"bg-gray-50 rounded-lg p-6 sticky top-24\">\n                  <h2 className=\"text-2xl font-bold text-black mb-6\">RESUMO DO PEDIDO</h2>\n\n                  <div className=\"space-y-4 mb-6\">\n                    <div className=\"flex justify-between text-gray-700\">\n                      <span>Subtotal</span>\n                      <span className=\"font-semibold\">€{subtotal.toFixed(2)}</span>\n                    </div>\n                    <div className=\"flex justify-between text-gray-700\">\n                      <span>Envio</span>\n                      <span className=\"font-semibold\">\n                        {shipping === 0 ? 'GRÁTIS' : `€${shipping.toFixed(2)}`}\n                      </span>\n                    </div>\n                    {shipping === 0 && (\n                      <p className=\"text-sm text-green-600\">✓ Envio grátis em compras acima de €100</p>\n                    )}\n                    <div className=\"border-t pt-4 flex justify-between text-xl font-bold text-black\">\n                      <span>TOTAL</span>\n                      <span>€{total.toFixed(2)}</span>\n                    </div>\n                  </div>\n\n                  <button\n                    onClick={handleCheckout}\n                    className=\"w-full px-6 py-4 bg-gold text-black font-bold rounded-lg hover:bg-gold-dark transition-colors cursor-pointer mb-4 whitespace-nowrap\"\n                  >\n                    FINALIZAR COMPRA\n                  </button>\n\n                  <Link\n                    to=\"/produtos\"\n                    className=\"block text-center text-black hover:text-gold cursor-pointer\"\n                  >\n                    Continuar comprando\n                  </Link>\n\n                  <div className=\"mt-6 pt-6 border-t\">\n                    <p className=\"text-sm font-semibold text-black mb-3\">PAGAMENTO SEGURO</p>\n                    <div className=\"flex items-center space-x-3\">\n                      <i className=\"ri-visa-line text-3xl text-gray-700\"></i>\n                      <i className=\"ri-mastercard-line text-3xl text-gray-700\"></i>\n                      <div className=\"w-8 h-8 flex items-center justify-center bg-gray-200 rounded text-xs font-bold text-gray-700\">\n                        PP\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <Footer />\n    </div>\n  );\n}\n"],"names":["Carrinho","navigate","useNavigate","cartItems","setCartItems","useState","useEffect","loadCart","cartData","cart","error","updateQuantity","id","newQuantity","updatedCart","item","removeItem","subtotal","sum","shipping","total","handleCheckout","jsxs","jsx","Navbar","Link","e","target","Footer"],"mappings":"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"}