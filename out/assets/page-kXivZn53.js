import{u as A,r,j as e,L as o}from"./index-C0IYKngZ.js";import{N as n,F as d}from"./Footer-BDjK8bl0.js";import{s as j}from"./supabase-CP4O_hkS.js";function O(){const{id:c}=A(),[s,p]=r.useState(null),[x,u]=r.useState([]),[N,f]=r.useState(!0),[l,m]=r.useState(1),[h,v]=r.useState(0),[y,g]=r.useState(!1);r.useEffect(()=>{c&&(w(),k())},[c]);const w=async()=>{try{const{data:t,error:a}=await j.from("products").select("*").eq("id",c).single();if(a)throw a;p(t)}catch(t){console.error("Erro ao carregar produto:",t)}finally{f(!1)}},k=async()=>{try{const{data:t,error:a}=await j.from("reviews").select("*").eq("product_id",c).order("created_at",{ascending:!1});if(a)throw a;u(t||[])}catch(t){console.error("Erro ao carregar avaliações:",t)}},S=()=>{if(!s)return;const t=JSON.parse(localStorage.getItem("cart")||"[]"),a=t.find(i=>i.id===s.id);a?a.quantity+=l:t.push({...s,quantity:l}),localStorage.setItem("cart",JSON.stringify(t)),g(!0),setTimeout(()=>g(!1),3e3)},E=()=>{if(!s)return;const t=JSON.parse(localStorage.getItem("favorites")||"[]");t.find(a=>a.id===s.id)?alert("Produto já está nos favoritos!"):(t.push(s),localStorage.setItem("favorites",JSON.stringify(t)),alert("Produto adicionado aos favoritos!"))};if(N)return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(n,{}),e.jsx("div",{className:"pt-24 flex items-center justify-center h-96",children:e.jsx("div",{className:"w-12 h-12 border-4 border-gold border-t-transparent rounded-full animate-spin"})}),e.jsx(d,{})]});if(!s)return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(n,{}),e.jsxs("div",{className:"pt-24 text-center py-20",children:[e.jsx("h1",{className:"text-3xl font-bold text-black mb-4",children:"Produto não encontrado"}),e.jsx(o,{to:"/produtos",className:"text-gold hover:underline cursor-pointer",children:"Voltar para produtos"})]}),e.jsx(d,{})]});const b=[s.image_url,s.image_url,s.image_url];return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx(n,{}),y&&e.jsx("div",{className:"fixed top-24 right-6 z-50 bg-gold text-black px-6 py-4 rounded-lg shadow-lg font-semibold animate-bounce",children:"✓ Produto adicionado ao carrinho!"}),e.jsxs("div",{className:"pt-24 pb-20",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-6",children:e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(o,{to:"/",className:"hover:text-gold cursor-pointer",children:"Início"}),e.jsx("span",{children:"/"}),e.jsx(o,{to:"/produtos",className:"hover:text-gold cursor-pointer",children:"Produtos"}),e.jsx("span",{children:"/"}),e.jsx("span",{className:"text-black font-semibold",children:s.name})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs("div",{children:[e.jsx("div",{className:"w-full h-96 bg-gray-50 rounded-lg mb-4 overflow-hidden",children:e.jsx("img",{src:b[h],alt:s.name,className:"w-full h-full object-contain p-8"})}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:b.map((t,a)=>e.jsx("button",{onClick:()=>v(a),className:`w-full h-24 bg-gray-50 rounded-lg overflow-hidden cursor-pointer border-2 transition-colors ${h===a?"border-gold":"border-transparent"}`,children:e.jsx("img",{src:t,alt:`${s.name} ${a+1}`,className:"w-full h-full object-contain p-2"})},a))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:s.brand}),e.jsx("h1",{className:"text-4xl font-bold text-black mb-4",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((t,a)=>e.jsx("i",{className:`ri-star-${a<Math.floor(s.rating)?"fill":"line"} text-gold text-xl`},a))}),e.jsx("span",{className:"text-gray-600",children:s.rating.toFixed(1)}),e.jsxs("span",{className:"text-gray-400",children:["(",s.reviews_count," avaliações)"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-5xl font-bold text-black mb-2",children:["€",s.price.toFixed(2)]}),e.jsx("p",{className:"text-gray-600",children:"IVA incluído"})]}),e.jsx("div",{className:"mb-6",children:s.stock>10?e.jsx("p",{className:"text-green-600 font-semibold",children:"✓ Em estoque"}):s.stock>0?e.jsxs("p",{className:"text-orange-600 font-semibold",children:["⚠ Apenas ",s.stock," unidades restantes"]}):e.jsx("p",{className:"text-red-600 font-semibold",children:"✗ Esgotado"})}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("i",{className:"ri-truck-line text-2xl text-gold"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-black",children:["Entrega estimada: ","3-5 dias úteis"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Entregamos em toda a Europa"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"QUANTIDADE"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>m(Math.max(1,l-1)),className:"w-10 h-10 flex items-center justify-center bg-gray-200 rounded-lg hover:bg-gray-300 cursor-pointer",children:e.jsx("i",{className:"ri-subtract-line"})}),e.jsx("span",{className:"text-xl font-bold text-black w-12 text-center",children:l}),e.jsx("button",{onClick:()=>m(Math.min(s.stock,l+1)),className:"w-10 h-10 flex items-center justify-center bg-gray-200 rounded-lg hover:bg-gray-300 cursor-pointer",children:e.jsx("i",{className:"ri-add-line"})})]})]}),e.jsxs("div",{className:"flex space-x-4 mb-6",children:[e.jsx("button",{onClick:S,disabled:s.stock===0,className:"flex-1 px-8 py-4 bg-gold text-black font-bold rounded-lg hover:bg-gold-dark transition-colors cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap",children:"ADICIONAR AO CARRINHO"}),e.jsx("button",{onClick:E,className:"w-14 h-14 flex items-center justify-center bg-black text-gold rounded-lg hover:bg-gray-800 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-heart-line text-2xl"})})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("p",{className:"text-sm font-semibold text-black mb-3",children:"MÉTODOS DE PAGAMENTO"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("i",{className:"ri-visa-line text-4xl text-gray-700"}),e.jsx("i",{className:"ri-mastercard-line text-4xl text-gray-700"}),e.jsx("div",{className:"w-10 h-10 flex items-center justify-center bg-gray-100 rounded",children:e.jsx("span",{className:"text-xs font-bold text-gray-700",children:"PayPal"})})]})]})]})]}),e.jsxs("div",{className:"mt-16",children:[e.jsx("div",{className:"border-b mb-8",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsx("button",{className:"px-1 py-4 border-b-2 border-gold text-black font-semibold",children:"DESCRIÇÃO"}),e.jsx("button",{className:"px-1 py-4 border-b-2 border-transparent text-gray-600 hover:text-black",children:"ESPECIFICAÇÕES"})]})}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.description})})]}),e.jsxs("div",{className:"mt-16",children:[e.jsx("h2",{className:"text-3xl font-bold text-black mb-8",children:"AVALIAÇÕES DOS CLIENTES"}),x.length===0?e.jsx("p",{className:"text-gray-600",children:"Ainda não há avaliações para este produto."}):e.jsx("div",{className:"space-y-6",children:x.map(t=>e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-black",children:t.user_name}),e.jsx("div",{className:"flex items-center mt-1",children:[...Array(5)].map((a,i)=>e.jsx("i",{className:`ri-star-${i<t.rating?"fill":"line"} text-gold text-sm`},i))})]}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString("pt-PT")})]}),e.jsx("p",{className:"text-gray-700",children:t.comment})]},t.id))})]})]})]}),e.jsx(d,{})]})}export{O as default};
//# sourceMappingURL=page-kXivZn53.js.map
