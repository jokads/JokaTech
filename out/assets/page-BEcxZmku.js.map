{"version":3,"file":"page-BEcxZmku.js","sources":["../../src/pages/sucesso/page.tsx"],"sourcesContent":["\nimport { useEffect, useState } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport Navbar from '../../components/feature/Navbar';\nimport Footer from '../../components/feature/Footer';\nimport { supabase } from '../../lib/supabase';\n\nexport default function Sucesso() {\n  const navigate = useNavigate();\n  const [searchParams] = useSearchParams();\n  const [orderSaved, setOrderSaved] = useState(false);\n  const sessionId = searchParams.get('session_id');\n\n  useEffect(() => {\n    // Salvar pedido no banco de dados após pagamento bem-sucedido\n    const savePendingOrder = async () => {\n      const pendingOrderData = localStorage.getItem('pendingOrder');\n      \n      if (pendingOrderData && !orderSaved) {\n        try {\n          const orderData = JSON.parse(pendingOrderData);\n          \n          const { error } = await supabase\n            .from('orders')\n            .insert({\n              ...orderData,\n              status: 'paid',\n              stripe_session_id: sessionId,\n            });\n\n          if (error) {\n            console.error('Erro ao salvar pedido:', error);\n          } else {\n            // Limpar dados pendentes após salvar\n            localStorage.removeItem('pendingOrder');\n            setOrderSaved(true);\n          }\n        } catch (error) {\n          console.error('Erro ao processar pedido pendente:', error);\n        }\n      }\n    };\n\n    savePendingOrder();\n  }, [sessionId, orderSaved]);\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <Navbar />\n\n      <div className=\"pt-24 pb-20\">\n        <div className=\"max-w-4xl mx-auto px-6 text-center\">\n          <div className=\"bg-gradient-to-br from-gold/10 to-gold/5 rounded-2xl p-12 mb-8\">\n            <div className=\"w-24 h-24 bg-gold rounded-full flex items-center justify-center mx-auto mb-6\">\n              <i className=\"ri-check-line text-5xl text-black\"></i>\n            </div>\n\n            <h1 className=\"text-5xl font-bold text-black mb-4\">\n              PAGAMENTO <span className=\"text-gold\">CONFIRMADO!</span>\n            </h1>\n\n            <p className=\"text-xl text-gray-700 mb-8\">\n              Obrigado pela sua compra! Seu pedido foi processado com sucesso.\n            </p>\n\n            {sessionId && (\n              <div className=\"bg-white rounded-lg p-6 mb-8 inline-block\">\n                <p className=\"text-sm text-gray-600 mb-2\">ID da Transação</p>\n                <p className=\"text-lg font-mono font-semibold text-black break-all\">\n                  {sessionId}\n                </p>\n              </div>\n            )}\n\n            <div className=\"space-y-4 text-left max-w-2xl mx-auto mb-8\">\n              <div className=\"flex items-start space-x-4\">\n                <div className=\"w-8 h-8 bg-gold rounded-full flex items-center justify-center flex-shrink-0 mt-1\">\n                  <i className=\"ri-mail-line text-black\"></i>\n                </div>\n                <div>\n                  <h3 className=\"font-bold text-black mb-1\">Confirmação por E-mail</h3>\n                  <p className=\"text-gray-600\">\n                    Enviamos um e-mail de confirmação com todos os detalhes do seu pedido.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start space-x-4\">\n                <div className=\"w-8 h-8 bg-gold rounded-full flex items-center justify-center flex-shrink-0 mt-1\">\n                  <i className=\"ri-truck-line text-black\"></i>\n                </div>\n                <div>\n                  <h3 className=\"font-bold text-black mb-1\">Preparação do Envio</h3>\n                  <p className=\"text-gray-600\">\n                    Seu pedido será preparado e enviado em até 2 dias úteis.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-start space-x-4\">\n                <div className=\"w-8 h-8 bg-gold rounded-full flex items-center justify-center flex-shrink-0 mt-1\">\n                  <i className=\"ri-customer-service-line text-black\"></i>\n                </div>\n                <div>\n                  <h3 className=\"font-bold text-black mb-1\">Suporte Disponível</h3>\n                  <p className=\"text-gray-600\">\n                    Qualquer dúvida, entre em contato pelo WhatsApp: +352 621 377 168\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n              <button\n                onClick={() => navigate('/')}\n                className=\"px-8 py-4 bg-gold text-black font-bold rounded-lg hover:bg-gold-dark transition-colors cursor-pointer whitespace-nowrap\"\n              >\n                VOLTAR À PÁGINA INICIAL\n              </button>\n              <button\n                onClick={() => navigate('/produtos')}\n                className=\"px-8 py-4 bg-black text-gold font-bold rounded-lg hover:bg-gray-900 transition-colors cursor-pointer whitespace-nowrap\"\n              >\n                CONTINUAR COMPRANDO\n              </button>\n            </div>\n          </div>\n\n          <div className=\"bg-gray-50 rounded-lg p-8\">\n            <h2 className=\"text-2xl font-bold text-black mb-4\">\n              PRÓXIMOS PASSOS\n            </h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 text-center\">\n              <div>\n                <div className=\"text-4xl font-bold text-gold mb-2\">1</div>\n                <h3 className=\"font-bold text-black mb-2\">Confirmação</h3>\n                <p className=\"text-sm text-gray-600\">\n                  Verifique seu e-mail para detalhes do pedido\n                </p>\n              </div>\n              <div>\n                <div className=\"text-4xl font-bold text-gold mb-2\">2</div>\n                <h3 className=\"font-bold text-black mb-2\">Preparação</h3>\n                <p className=\"text-sm text-gray-600\">\n                  Preparamos e testamos seu pedido\n                </p>\n              </div>\n              <div>\n                <div className=\"text-4xl font-bold text-gold mb-2\">3</div>\n                <h3 className=\"font-bold text-black mb-2\">Entrega</h3>\n                <p className=\"text-sm text-gray-600\">\n                  Receba em casa com rastreamento\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Footer />\n    </div>\n  );\n}\n"],"names":["Sucesso","navigate","useNavigate","searchParams","useSearchParams","orderSaved","setOrderSaved","useState","sessionId","useEffect","pendingOrderData","orderData","error","supabase","jsxs","jsx","Navbar","Footer"],"mappings":"wJAOA,SAAwBA,GAAU,CAChC,MAAMC,EAAWC,EAAA,EACX,CAACC,CAAY,EAAIC,EAAA,EACjB,CAACC,EAAYC,CAAa,EAAIC,EAAAA,SAAS,EAAK,EAC5CC,EAAYL,EAAa,IAAI,YAAY,EAE/CM,OAAAA,EAAAA,UAAU,IAAM,EAEW,SAAY,CACnC,MAAMC,EAAmB,aAAa,QAAQ,cAAc,EAE5D,GAAIA,GAAoB,CAACL,EACvB,GAAI,CACF,MAAMM,EAAY,KAAK,MAAMD,CAAgB,EAEvC,CAAE,MAAAE,GAAU,MAAMC,EACrB,KAAK,QAAQ,EACb,OAAO,CACN,GAAGF,EACH,OAAQ,OACR,kBAAmBH,CAAA,CACpB,EAECI,EACF,QAAQ,MAAM,yBAA0BA,CAAK,GAG7C,aAAa,WAAW,cAAc,EACtCN,EAAc,EAAI,EAEtB,OAASM,EAAO,CACd,QAAQ,MAAM,qCAAsCA,CAAK,CAC3D,CAEJ,GAEA,CACF,EAAG,CAACJ,EAAWH,CAAU,CAAC,EAGxBS,EAAAA,KAAC,MAAA,CAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAACC,EAAA,EAAO,QAEP,MAAA,CAAI,UAAU,cACb,SAAAF,EAAAA,KAAC,MAAA,CAAI,UAAU,qCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,+EACb,eAAC,IAAA,CAAE,UAAU,oCAAoC,CAAA,CACnD,EAEAD,EAAAA,KAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,CAAA,aACvCC,EAAAA,IAAC,OAAA,CAAK,UAAU,YAAY,SAAA,aAAA,CAAW,CAAA,EACnD,EAEAA,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,mEAE1C,EAECP,GACCM,EAAAA,KAAC,MAAA,CAAI,UAAU,4CACb,SAAA,CAAAC,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,kBAAe,EACzDA,EAAAA,IAAC,IAAA,CAAE,UAAU,uDACV,SAAAP,CAAA,CACH,CAAA,EACF,EAGFM,EAAAA,KAAC,MAAA,CAAI,UAAU,6CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACb,eAAC,IAAA,CAAE,UAAU,0BAA0B,CAAA,CACzC,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,yBAAsB,EAChEA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,wEAAA,CAE7B,CAAA,CAAA,CACF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACb,eAAC,IAAA,CAAE,UAAU,2BAA2B,CAAA,CAC1C,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,sBAAmB,EAC7DA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,0DAAA,CAE7B,CAAA,CAAA,CACF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,6BACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACb,eAAC,IAAA,CAAE,UAAU,sCAAsC,CAAA,CACrD,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,qBAAkB,EAC5DA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,mEAAA,CAE7B,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,EACF,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,iDACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMd,EAAS,GAAG,EAC3B,UAAU,0HACX,SAAA,yBAAA,CAAA,EAGDc,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMd,EAAS,WAAW,EACnC,UAAU,yHACX,SAAA,qBAAA,CAAA,CAED,CAAA,CACF,CAAA,EACF,EAEAa,EAAAA,KAAC,MAAA,CAAI,UAAU,4BACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,qCAAqC,SAAA,kBAEnD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAoC,SAAA,IAAC,EACpDA,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,cAAW,EACrDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,8CAAA,CAErC,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAoC,SAAA,IAAC,EACpDA,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,aAAU,EACpDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,kCAAA,CAErC,CAAA,EACF,SACC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,oCAAoC,SAAA,IAAC,EACpDA,EAAAA,IAAC,KAAA,CAAG,UAAU,4BAA4B,SAAA,UAAO,EACjDA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,iCAAA,CAErC,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAECE,EAAA,CAAA,CAAO,CAAA,EACV,CAEJ"}